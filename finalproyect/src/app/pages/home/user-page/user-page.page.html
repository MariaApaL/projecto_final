<!-- https://www.behance.net/gallery/93884721/Event-App 
https://www.behance.net/search/projects/?search=event+app-->


<ion-header no-border>
  <ion-toolbar>
    <ion-title *ngIf="currentUser">
      {{currentUser.user}}
    </ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="openModal()">
        <ion-icon class="config-icon" name="cog-outline"></ion-icon>
      </ion-button>

    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="currentUser">

  <!-- USER PROFILE -->
  <div class="profile-pic">
    <img src={{currentUser.picture}} alt="user_avatar">

  </div>
  <div class="profile">
    <div class="profile-stars" >
      <ul>
        <li><span>0/5</span> Calificaci칩n</li>
        <li><span>{{eventCount}}</span> Eventos</li>
      </ul>
    </div>

    <div class="profile-bio">
      <h1>{{currentUser.name}}</h1>
      <p>{{currentUser.bio}}</p>
    </div>
  </div>

  <!-- SEGMENTO DE MEGUSTA Y MIS EVENTOS -->
  <div class="event-section">

    <ion-segment value="my-favs" (ionChange)="segmentChanged($event)">
      <ion-segment-button value="my-favs">

        <ion-icon name="heart"></ion-icon>

      </ion-segment-button>

      <ion-segment-button value="my-events">
        <ion-icon name="albums-outline"></ion-icon>
      </ion-segment-button>
      <ion-segment-button value="my-joined">
        <ion-icon name="checkmark-done-outline"></ion-icon>
      </ion-segment-button>
    </ion-segment>
    <!-- FIN DEL SEGMENTO DE MEGUSTA Y MIS EVENTOS -->

    <!--EVENTOS -->
    <div class="event-cards ion-margin" *ngIf="selectedSegment === 'my-events'">

      <ion-card *ngFor="let event of myEvents" >
  
        <ion-card-header class="ion-no-padding" (click)="selectEvent(event._id)">
          <img src="../../../../assets/pictures/hokahe.png" />
        </ion-card-header>
  
        <ion-card-content>
          <div class="date">
  
  
            <ion-card-subtitle><strong>{{ event.date | date:'dd MMM, yyyy HH:mm'
                }}</strong></ion-card-subtitle>
          </div>
  
          <div class="name">
            <ion-card-title class="eventname" (click)="selectEvent(event._id)"><strong>{{ event.name }}</strong></ion-card-title>
  
          </div>
  
          <div class="buttons" >
              <div class="members">
                <ion-icon name="person"></ion-icon>
                <p class="plazas"> <strong>{{event.plazas.length}}</strong>/{{event.numPlazas}}</p>
            </div>
  
            <div class="event-buttons">
              <ion-button class="delete-button" slot="end" (click)="deleteEvent(event.name,userId)">
                <ion-icon name="trash-outline" slot="icon-only" /></ion-button>
              <ion-button class="edit-button" slot="end" (click)="editEvent(event._id)">
                <ion-icon name="pencil-outline" slot="icon-only" />
              </ion-button>

            </div>
  </div>
  
  
        </ion-card-content>
  
      </ion-card>
  

      </div>


    <!-- <ion-row class="ion-text-left default-left-padding" *ngIf="selectedSegment === 'my-events'">
      <ng-container *ngFor="let event of myEvents">
        <ion-col size="6">
          <ion-card>
            <ion-card-header class="ion-no-padding">
              <img src="../../../../assets/events/event1.svg" />
            </ion-card-header>

            <ion-card-content>
              <p class="date">{{ event.date | date:'dd MMM, yyyy HH:mm' }}</p>
              <h2 class="eventname">{{ event.name }}</h2>
              <p class="location"><ion-icon name="location"></ion-icon>{{ event.location }}</p>

              <div class="additional-info">

                <p class="time">{{event.numPlazas}} Plazas</p>
              </div>
              <div class="more-info">
                <p (click)="selectEvent(event._id)">Ver m치s</p>
              </div>
              <div class="event-buttons">
                <ion-button class="delete-button" slot="end" (click)="deleteEvent(event.name,userId)">
                  <ion-icon name="trash-outline" slot="icon-only" /></ion-button>
                <ion-button class="edit-button" slot="end" (click)="editEvent(event._id)">
                  <ion-icon name="pencil-outline" slot="icon-only" />
                </ion-button>

              </div>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ng-container>
    </ion-row> -->

    <!--  MIS FAVS  -->

    <div class="event-cards ion-margin" *ngIf="selectedSegment === 'my-favs'">

      <ion-card *ngFor="let fav of myFavs" >
  
        <ion-card-header class="ion-no-padding" (click)="selectEvent(fav._id)">
          <img src="../../../../assets/pictures/hokahe.png" />
        </ion-card-header>
  
        <ion-card-content>
          <div class="date">
  
  
            <ion-card-subtitle><strong>{{ fav.date | date:'dd MMM, yyyy HH:mm'
                }}</strong></ion-card-subtitle>
          </div>
  
          <div class="name">
            <ion-card-title class="eventname" (click)="selectEvent(fav._id)"><strong>{{ fav.name }}</strong></ion-card-title>
  
          </div>
    <div class="buttons" >
              <div class="members">
                <ion-icon name="person"></ion-icon>
                <p class="plazas"> <strong>{{fav.plazas.length}}</strong>/{{fav.numPlazas}}</p>
            </div>
            <div class="fav-buttons">
              <ion-buttons>
                <ion-button (click)="deleteFavorite(fav._id)">
                  <ion-icon slot="icon-only" name="heart"></ion-icon>
                </ion-button>
              </ion-buttons>
            </div>
          </div>
  
  
  
        </ion-card-content>
  
      </ion-card>
  </div>
    <!-- <ion-row class="ion-text-left default-left-padding" *ngIf="selectedSegment === 'my-favs'">
      <ng-container *ngFor="let fav of myFavs">
        <ion-col size="6">
          <ion-card>
            <ion-card-header class="ion-no-padding">
              <img src="../../../../assets/events/event1.svg" />
            </ion-card-header>

            <ion-card-content>
              <p class="date">{{ fav.date | date:'dd MMM, yyyy HH:mm' }}</p>
              <h2 class="eventname">{{ fav.name }}</h2>
              <p class="location"><ion-icon name="location"></ion-icon>{{ fav.location }}</p>

              <div class="additional-info">

                <p class="time">{{fav.numPlazas}} Plazas</p>
              </div>
              <div class="more-info">
                <p (click)="selectEvent(fav._id)">Ver m치s</p>
              </div>
              <div class="fav-buttons">
                <ion-buttons>
                  <ion-button (click)="deleteFavorite(fav._id)">
                    <ion-icon slot="icon-only" name="heart"></ion-icon>
                  </ion-button>
                </ion-buttons>
              </div>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ng-container>
    </ion-row> -->


    <!--ASISTIDOS -->
    <!-- <ion-row class="ion-text-left default-left-padding" *ngIf="selectedSegment === 'my-joined'">
      <ng-container *ngFor="let join of joinedEvents">
        <ion-col size="6">
          <ion-card>
            <ion-card-header class="ion-no-padding">
              <img src="../../../../assets/events/event1.svg" />
            </ion-card-header>

            <ion-card-content>
              <p class="date">{{ join.date | date:'dd MMM, yyyy HH:mm' }}</p>
              <h2 class="eventname">{{ join.name }}</h2>
              <p class="location"><ion-icon name="location"></ion-icon>{{ join.location }}</p>

              <div class="additional-info">

                <p class="time">{{join.numPlazas}} Plazas</p>
              </div>
              <div class="more-info">
                <p (click)="selectEvent(join._id)">Ver m치s</p>
              </div>

            </ion-card-content>
          </ion-card>
        </ion-col>
      </ng-container>
    </ion-row> -->
    <div class="event-cards ion-margin" *ngIf="selectedSegment === 'my-joined'">

      <ion-card  *ngFor="let join of joinedEvents" >
  
        <ion-card-header class="ion-no-padding" (click)="selectEvent(join._id)">
          <img src="../../../../assets/pictures/hokahe.png" />
        </ion-card-header>
  
        <ion-card-content>
          <div class="date">
  
  
            <ion-card-subtitle><strong>{{ join.date | date:'dd MMM, yyyy HH:mm'
                }}</strong></ion-card-subtitle>
          </div>
  
          <div class="name">
            <ion-card-title class="eventname" (click)="selectEvent(join._id)"><strong>{{ join.name }}</strong></ion-card-title>
  
          </div>
  
              <div class="members">
                <ion-icon name="person"></ion-icon>
                <p class="plazas"> <strong>{{join.plazas.length}}</strong>/{{join.numPlazas}}</p>
            </div>
         
  
  
  
        </ion-card-content>
  
      </ion-card>
  </div>
  </div>
</ion-content>